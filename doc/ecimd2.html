<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module ecimd2</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module ecimd2</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>CIMD2 Client.
<p>Copyright Â© 2017 Voyager Innovations Inc.</p>


<h2><a name="description">Description</a></h2><p>CIMD2 Client</p>
 
  <p>Exposes a start_link/1 function that accepts login parameters  
and makes connection to the Nokia SMSC. This starts an internal  
gen_server and returns a reference for that particular process</p>
 
  This is also the main module interface for this library. This will
  also expose the functions for sending sms, retrieving delivery
  receipts and registering callbacks
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#is_connected-1">is_connected/1</a></td><td>Check if connected to server.</td></tr>
<tr><td valign="top"><a href="#logout-1">logout/1</a></td><td>Logout the session.</td></tr>
<tr><td valign="top"><a href="#send_sms-6">send_sms/6</a></td><td>Sends a message to the specified MSISDN.</td></tr>
<tr><td valign="top"><a href="#start_link-1">start_link/1</a></td><td>Starts connection to the SMSC and logs in with the given  
credentials.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="is_connected-1">is_connected/1</a></h3>
<div class="spec">
<p><tt>is_connected(C::pid()) -&gt; {status, boolean()}</tt><br></p>
</div><p>Check if connected to server</p>

<h3 class="function"><a name="logout-1">logout/1</a></h3>
<div class="spec">
<p><tt>logout(C::pid()) -&gt; ok</tt><br></p>
</div><p>Logout the session</p>

<h3 class="function"><a name="send_sms-6">send_sms/6</a></h3>
<div class="spec">
<p><tt>send_sms(C::pid(), AccessCode::iodata(), Sender::iodata(), Destination::iodata(), Message::iodata(), Options) -&gt; [{message_id, iodata()}] | {error, atom()}</tt>
<ul class="definitions"><li><tt>Options = #{cancellable =&gt; boolean(), tariff_class =&gt; term(), service_desc =&gt; term(), status_report =&gt; integer(), priority =&gt; integer()}</tt></li></ul></p>
</div><p><p>Sends a message to the specified MSISDN</p>
 
  <p><code>Options</code> is an optional map that may contain the following keys:</p>
 
  <p><dt><b><code>cancellable</code></b></dt>
  <dd>Determines if the message can be cancelled or not</dd>
  <dt><b><code>tariff_class</code></b></dt>
  <dd>Tariff code to be used for the message. This is usually MC specific</dd>
  <dt><b><code>service_desc</code></b></dt>
  <dd>Service description to be used for the message.
      This is usually MC specific</dd>
  <dt><b><code>status_report</code></b></dt>
  <dd>Flag of the cases when the status report should be returned.
      See <a href="#status_report">status report flags</a></dd>
  <dt><b><code>priority</code></b></dt>
  <dd>Priorty of the message (0-9). Lower value means higher priority</dd></p>
 
  <div id="status_report">Status Report Flag values:</div>
  <dd>
    <p><code>1   - Temporary error</code></p>
    <p><code>2   - Validity period expired</code></p>
    <p><code>4   - Delivery failed</code></p>
    <p><code>8   - Delivery successful</code></p>
    <p><code>16  - Message cancelled</code></p>
    <p><code>32  - Message deleted by operator</code></p>
    <p><code>64  - First temporary result</code></p>
    <p><code>128 - Reserved</code></p>
  </dd></p>

<h3 class="function"><a name="start_link-1">start_link/1</a></h3>
<div class="spec">
<p><tt>start_link(Options) -&gt; {ok, pid()} | ignore | {error, term()}</tt>
<ul class="definitions"><li><tt>Options = #{name =&gt; ServerName, callback_mo =&gt; Callback, callback_dr =&gt; Callback, reconnect =&gt; Reconnect, host =&gt; iodata(), port =&gt; integer(), username =&gt; iodata(), password =&gt; iodata()}</tt></li><li><tt>Callback = {atom(), atom()}</tt></li><li><tt>Reconnect = integer() | {atom(), atom()}</tt></li><li><tt>ServerName = {local, Name::atom()} | {global, GlobalName::term()} | {via, Module::atom(), ViaName::term()}</tt></li></ul></p>
</div><p><p>Starts connection to the SMSC and logs in with the given  
credentials</p>
 
  <p><code>Options</code> is a map that should contain the following keys:</p>
 
  <dt><b><code>name</code></b></dt>
  <dd>If provided, the internal gen_server will be registered with this name.
      see gen_server:start_link/4</dd>
  <dt><b><code>callback_mo</code></b></dt>
  <dd>Tuple of module and function atoms to be executed when a mobile
      originating message has been received</dd>
  <dt><b><code>callback_dr</code></b></dt>
  <dd>Tuple of module and function atoms to be executed when a delivery
      receipt has been received</dd>
  <dt><b><code>reconnect</code></b></dt>
  <dd>Reconnect time for lazy initialization. This indicates the number of milliseconds
      to sleep before attempting to connect to the SMSC. This accepts a module and function
      atom tuple for external sources.</dd>
  <dt><b><code>host</code></b></dt>
  <dd>Hostname or IP address of the Nokia MC</dd>
  <dt><b><code>port</code></b></dt>
  <dd>Port of the Nokia MC</dd>
  <dt><b><code>username</code></b></dt>
  <dd>Username of the account to login</dd>
  <dt><b><code>password</code></b></dt>
  <dd>Password used to authenticate with the username</dd></p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, May 8 2017, 19:45:17.</i></p>
</body>
</html>
